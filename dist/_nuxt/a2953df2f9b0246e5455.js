(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{364:function(e,t,r){var content=r(383);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(11).default)("17d38326",content,!0,{sourceMap:!1})},365:function(e,t,r){var content=r(385);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(11).default)("6f712bae",content,!0,{sourceMap:!1})},382:function(e,t,r){"use strict";var n=r(364);r.n(n).a},383:function(e,t,r){(e.exports=r(10)(!1)).push([e.i,".sub-button[data-v-72fdeaca]{height:45px;width:180px;border-radius:6px;border:2px solid #2f8168;margin:6px;font-family:Helvetica Neue;font-size:.875em;cursor:pointer}.sub-button[data-v-72fdeaca]:focus{outline:none}.is-subscribed[data-v-72fdeaca]{color:#fff;background-color:#39c9a0}.is-subscribed[data-v-72fdeaca]:hover{border:2px solid #fff}.is-not-subscribed[data-v-72fdeaca]{color:#39c9a0;background-color:#fff}.is-not-subscribed[data-v-72fdeaca]:hover{border:2px solid #39c9a0}",""])},384:function(e,t,r){"use strict";var n=r(365);r.n(n).a},385:function(e,t,r){(e.exports=r(10)(!1)).push([e.i,".banner-container[data-v-146b9957]{position:relative;height:300px;display:flex;flex-direction:column}.banner-container.isMobile[data-v-146b9957]{height:auto}.image[data-v-146b9957]{display:block;height:100%;width:100%;-o-object-fit:cover;object-fit:cover}.banner-title[data-v-146b9957]{position:absolute;left:0;bottom:0;margin-right:60px;padding-left:15px;width:100%;height:75px;background-color:rgba(0,0,0,.5);color:#fff;display:flex;justify-content:flex-start;align-items:center}.banner-title-mobile[data-v-146b9957]{height:auto}.banner-font-desktop[data-v-146b9957]{font-size:3.75em}.banner-font-mobile[data-v-146b9957]{font-size:1.5em}.banner-container img[data-v-146b9957]{-o-object-fit:cover;object-fit:cover;min-width:100%;min-height:100%}.banner-subscription-button-container[data-v-146b9957]{position:absolute;top:15px;right:15px}",""])},387:function(e,t,r){"use strict";var n={name:"SubscriptionButton",props:{isSubscribed:{type:Boolean,default:!1},isProject:{type:Boolean,default:!1},id:{type:String,default:""}},computed:{getClasses:function(){return{"is-subscribed":this.isSubscribed,"is-not-subscribed":!this.isSubscribed}},getText:function(){return this.isSubscribed?"Subscribed":"Subscribe"}},methods:{handleClick:function(){if(this.isSubscribed){var e=this.isProject?"projects":"communities";this.$axios.$delete("/api/v1/profiles/".concat(this.$store.state.user._id,"/subs/").concat(e,"/").concat(this.id))}else this.$axios.$post("/api/v1/profiles/".concat(this.$store.state.user._id,"/subs"),{projectId:this.isProject?this.id:void 0,communityId:this.isProject?void 0:this.id});this.$emit("subscription-button-clicked",!this.isSubscribed)}}},o=(r(382),r(1)),c={name:"Banner",components:{SubscriptionButton:Object(o.a)(n,function(){var e=this.$createElement,t=this._self._c||e;return t("button",{staticClass:"sub-button",class:this.getClasses,on:{click:this.handleClick}},[t("b",[this._v(this._s(this.getText))])])},[],!1,null,"72fdeaca",null).exports},props:{id:{type:String,default:""},bannerUrl:{type:String,default:""},bannerTitle:{type:String,default:""},bannerTitlePrefix:{type:String,default:""},isSubscribed:{type:Boolean,default:!1},isOwner:{type:Boolean,default:!1},isMobile:{type:Boolean,default:!1}},methods:{handleClick:function(e){this.$emit("subscription-button-clicked",e)}}},l=(r(384),Object(o.a)(c,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"banner-container",class:{isMobile:e.isMobile}},[r("img",{attrs:{src:e.bannerUrl,onerror:"this.src='https://gradientjoy.com/1000x300'"}}),e._v(" "),r("div",{staticClass:"banner-subscription-button-container"},[e.isOwner?e._e():r("SubscriptionButton",{attrs:{"is-subscribed":e.isSubscribed,"is-project":"@"===e.bannerTitlePrefix,id:e.id},on:{"subscription-button-clicked":e.handleClick}})],1),e._v(" "),r("div",{staticClass:"banner-title",class:{"banner-font-desktop":!e.isMobile,"banner-font-mobile":e.isMobile,"banner-title-desktop":!e.isMobile,"banner-title-mobile":e.isMobile}},[r("b",[e._v(e._s(e.bannerTitlePrefix)+e._s(e.bannerTitle))])])])},[],!1,null,"146b9957",null));t.a=l.exports},414:function(e,t,r){var content=r(472);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(11).default)("079c1a6c",content,!0,{sourceMap:!1})},471:function(e,t,r){"use strict";var n=r(414);r.n(n).a},472:function(e,t,r){(e.exports=r(10)(!1)).push([e.i,".button.action[data-v-3befaff5]{color:#fff;background-color:#39c9a0;border-color:#39c9a0;margin-bottom:1.75em}.profilePic img[data-v-3befaff5]{width:180px;height:180px;border-radius:6px;-o-object-fit:cover;object-fit:cover}.picSection[data-v-3befaff5]{text-align:center}.bannerPic img[data-v-3befaff5]{width:1000px;max-width:100%;max-height:250px;-o-object-fit:cover;object-fit:cover}",""])},494:function(e,t,r){"use strict";r.r(t);r(20);var n=r(4),o=(r(28),r(62)),c=r(142),l=r(61),d=r(141),f=r(387),h=r(366),m=r(376),v=r(367),P=r(375),x=(r(115),r(114),r(140),{name:"EditProjectForm",props:{name:{type:String,default:""},projectName:{type:String,default:""},headerPicture:{type:String,default:""},profilePicture:{type:String,default:""},description:{type:String,default:""},projectId:{type:String,default:""}},data:function(){return{profilePicFile:"",bannerPicFile:"",editForm:{name:this.name,projectName:this.projectName,description:this.description,profilePicture:this.profilePicture,headerPicture:this.headerPicture,admins:[]}}},methods:{selectFile:function(){var e=Object(n.a)(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:"profile"===t?this.profilePicFile=this.$refs.profilePicFile.files[0]:this.bannerPicFile=this.$refs.bannerPicFile.files[0],r=new FileReader,n=this,r.onload=function(e){"profile"===t?n.editForm.profilePicture=e.target.result:n.editForm.headerPicture=e.target.result},"profile"===t?r.readAsDataURL(this.profilePicFile):r.readAsDataURL(this.bannerPicFile);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),uploadImage:function(){var e=Object(n.a)(regeneratorRuntime.mark(function e(t){var r,image,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((r=new FormData).append("picType","project"),"profile"!==t){e.next=17;break}return e.prev=3,r.append("file",this.profilePicFile),e.next=7,this.$axios.$post("/api/v1/profilePicUpload",r);case 7:image=e.sent,this.editForm.profilePicture=image.file,e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),console.log(e.t0),this.$toast.open({duration:5e3,message:"There was an error uploading your profile picture. Please try again.",position:"is-top",type:"is-danger"});case 15:e.next=29;break;case 17:return r.append("file",this.bannerPicFile),e.prev=18,e.next=21,this.$axios.$post("/api/v1/bannerPicUpload",r);case 21:n=e.sent,this.editForm.headerPicture=n.file,e.next=29;break;case 25:e.prev=25,e.t1=e.catch(18),console.log(e.t1),this.$toast.open({duration:5e3,message:"There was an error uploading your banner picture. Please try again.",position:"is-top",type:"is-danger"});case 29:case"end":return e.stop()}},e,this,[[3,11],[18,25]])}));return function(t){return e.apply(this,arguments)}}(),editProject:function(){var e=Object(n.a)(regeneratorRuntime.mark(function e(t){var r,n,o,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.profilePicture===t.profilePicture){e.next=4;break}return e.next=3,this.uploadImage("profile");case 3:this.profilePicture.includes("https://kowalla-dev")&&(r=this.profilePicture.split("profile-pics/")[1],this.$axios.$post("/api/v1/imageDelete",{bucket:"kowalla-dev/project/profile-pics",fileName:r}));case 4:if(this.headerPicture===t.headerPicture){e.next=8;break}return e.next=7,this.uploadImage("banner");case 7:this.headerPicture.includes("https://kowalla-dev")&&(n=this.profilePicture.split("profile-pics/")[1],this.$axios.$post("/api/v1/imageDelete",{bucket:"kowalla-dev/project/banner-pics",fileName:n}));case 8:return e.prev=8,e.next=11,this.$axios.$put("api/v1/projects/".concat(this.projectId),{name:t.name,description:t.description,profilePicture:t.profilePicture,headerPicture:t.headerPicture});case 11:o=e.sent,c={name:o.name,pictureUrl:o.profilePicture,projectId:o._id},this.$store.commit("user/editOwned",c),this.$router.push({path:"/dev/project/".concat(o.name)}),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(8),console.log(e.t0);case 20:case"end":return e.stop()}},e,this,[[8,17]])}));return function(t){return e.apply(this,arguments)}}()}}),j=(r(471),r(1)),_=Object(j.a)(x,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"box"},[r("section",[r("div",{staticClass:"title"},[e._v("Edit @"+e._s(e.name))]),e._v(" "),r("b-field",{attrs:{label:"Project username"}},[r("b-input",{attrs:{maxlength:"20"},model:{value:e.editForm.projectName,callback:function(t){e.$set(e.editForm,"projectName",t)},expression:"editForm.projectName"}})],1),e._v(" "),r("b-field",{attrs:{label:"Project username"}},[r("b-input",{attrs:{maxlength:"20"},model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}})],1),e._v(" "),r("b-field",{attrs:{label:"Profile Picture"}}),e._v(" "),r("div",{staticClass:"picSection"},[r("p",{staticClass:"profilePic"},[r("img",{attrs:{src:e.editForm.profilePicture,onerror:"this.src='https://gradientjoy.com/40'"}})]),e._v(" "),r("a",{staticClass:"button action"},[r("input",{ref:"profilePicFile",staticClass:"file-input",attrs:{type:"file"},on:{change:function(t){return e.selectFile("profile")}}}),e._v(" "),e.editForm.profilePicture?r("span",[e._v("Change Profile Picture")]):r("span",[e._v("Add Profile Picture")]),e._v("  \n        "),r("font-awesome-icon",{attrs:{icon:"camera"}})],1)]),e._v(" "),r("b-field",{attrs:{label:"Banner Picture"}}),e._v(" "),r("div",{staticClass:"picSection"},[r("p",{staticClass:"bannerPic"},[r("img",{attrs:{src:e.editForm.headerPicture,onerror:"this.src='https://gradientjoy.com/1000x300'"}})]),e._v(" "),r("a",{staticClass:"button action"},[r("input",{ref:"bannerPicFile",staticClass:"file-input",attrs:{type:"file"},on:{change:function(t){return e.selectFile("banner")}}}),e._v(" "),e.editForm.headerPicture?r("span",[e._v("Change Banner Picture")]):r("span",[e._v("Add Banner Picture")]),e._v("  \n        "),r("font-awesome-icon",{attrs:{icon:"camera"}})],1)]),e._v(" "),r("b-field",{attrs:{label:"Description"}},[r("b-input",{attrs:{maxlength:"500",type:"textarea"},model:{value:e.editForm.description,callback:function(t){e.$set(e.editForm,"description",t)},expression:"editForm.description"}})],1),e._v(" "),r("a",{staticClass:"button action",on:{click:function(t){return e.editProject(e.editForm)}}},[e._v("\n      Submit\n    ")])],1)])},[],!1,null,"3befaff5",null).exports,k=r(423),$={name:"UserPageTest",components:{EditProjectForm:_,Header:l.a,MobileHeader:o.a,MobileFooter:c.a,NavPane:d.a,Banner:f.a,DescriptionCard:h.a,ProfileCard:m.a,InfoPane:v.a,EditButton:P.a,EditProjectModal:k.a},data:function(){return{bannerPictureUrl:"",projectProfilePictureUrl:"",projectDescription:"",admins:null,projectId:"",projectName:"",adminFirstName:"",adminLastName:"",adminUsername:"",adminProfilePictureUrl:"",projectStats:[],profileStats:[],postList:[],isNestedUrl:!1,infoRes:!1}},computed:{isOwner:function(){var e;if(void 0!==this.$store.state.user.owned)for(var i=0;i<this.$store.state.user.owned.length;i++)this.$store.state.user.owned[i].name===this.name&&(e=!0);return e},name:function(){return this.$route.params.projectname},activeTab:function(){return this.$store.state.activeTabs.ProjectSettingsActiveTab}},mounted:function(){var e=Object(n.a)(regeneratorRuntime.mark(function e(){var t,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===this.$store.state.user.owned){e.next=10;break}i=0;case 2:if(!(i<this.$store.state.user.owned.length)){e.next=9;break}if(this.$store.state.user.owned[i].name!==this.name){e.next=6;break}return t=!0,e.abrupt("break",9);case 6:i++,e.next=2;break;case 9:t||this.$router.push({path:"/dev/user/".concat(this.name)});case 10:return e.next=12,this.$axios.get("/api/v1/projects/project/".concat(this.name));case 12:this.infoRes=e.sent,this.projectName=this.infoRes.data.projectName,this.bannerPictureUrl=this.infoRes.data.headerPicture,this.projectProfilePictureUrl=this.infoRes.data.profilePicture,this.projectId=this.infoRes.data._id,this.projectDescription=this.infoRes.data.description,document.title="Kowalla - @".concat(this.name," Settings");case 19:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},w=Object(j.a)($,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"screen background-tint"},[r("div",{staticClass:"container is-fullhd is-hidden-touch"},[r("div",{staticClass:"columns is-marginless main-margin",class:{firstVisit:this.$store.state.firstVisit.firstVisit}},[r("div",{staticClass:"column is-one-quarter is-paddingless side-pane"},[r("NavPane")],1),e._v(" "),r("div",{staticClass:"column is-one-half is-paddingless"},[r("b-tabs",{attrs:{id:"columnTabs"},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[r("b-tab-item",[e.infoRes?r("EditProjectForm",{attrs:{name:e.name,"project-name":e.projectName,"header-picture":e.bannerPictureUrl,"profile-picture":e.projectProfilePictureUrl,description:e.projectDescription,"project-id":e.projectId}}):e._e()],1),e._v(" "),r("b-tab-item",[e._v("\n            Test!\n          ")])],1)],1),e._v(" "),r("div",{staticClass:"column is-one-quarter is-paddingless"})])]),e._v(" "),r("div",{staticClass:"columns is-marginless is-hidden-desktop mobile-main-margin",class:{firstVisit:this.$store.state.firstVisit.firstVisit}},[r("b-tabs",{attrs:{id:"columnTabs"},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[r("b-tab-item",[e.infoRes?r("EditProjectForm",{attrs:{name:e.name,"project-name":e.projectName,"header-picture":e.bannerPictureUrl,"profile-picture":e.projectProfilePictureUrl,description:e.projectDescription,"project-id":e.projectId}}):e._e()],1),e._v(" "),r("b-tab-item",[e._v("\n        Test!\n      ")])],1)],1)])},[],!1,null,"52e06e9d",null);t.default=w.exports}}]);